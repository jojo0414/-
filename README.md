# e起養魚吧－利用Unity實現智慧養魚
## 檔案連結(太大了只能傳這個)
https://drive.google.com/file/d/1-axj3Os7Ey8J3rITYiAuAkNoYmNW-XBw/view?usp=sharing

## 前言
近年來受新冠疫情影響，民眾為防疫考量，大多選擇減少外出，培養可以在室內進行的興趣愛好，如：養殖盆栽、觀賞魚類。觀察到這樣的現象後，我們打算針對模擬養魚進行研究，讓民眾在養殖魚隻的過程中，可以學習到正確養魚知識，增加趣味的同時也能減少開銷。

本研究將以李曉磊教授及其團隊提出的人工魚群優化演算法進行實作，模擬魚類生態，以Unity建模建造仿真魚缸，並透過LSTM Autoencoder偵測魚群的狀態，找出異常的魚，提醒使用者需多加注意此魚的健康狀態。
## 描述
### Unity
啟動後，魚隻開始移動，隨著人工魚演算法，執行覓食、群聚、跟隨、移動、隨機等五種行為。
#### 覓食
當視距內隨機選擇的某個狀態的食物濃度大於目前狀態，朝選定方向前進一步。
#### 群聚
當魚群中心有更多食物且不擁擠，則朝中心前進一步。
#### 跟隨
當同伴所在位置的食物濃度比目前狀態位置的食物濃度高，且同伴附近不擁擠，則往同伴所在位置前進一步。
#### 移動
在視覺範圍內隨機選擇一個狀態，朝著此狀態移動，是覓食的默認行為。
#### 隨機
如果再給定的(m-n)次迭代中，食物濃度幾乎相同或差異小於一個比例，則隨機指定位置使人工魚隨機移動。
### Python
在執行Unity程式後，同步執行test.py(路徑：darknet-master/build/darknet/x64/test.py)，當執行偵測異常行為時(每十分鐘自動偵測或使用者手動按下按鈕)，找出問題魚隻並持續追蹤。
#### LSTM-Autoencoder 訓練
將Unity螢幕畫面截圖(200幀/組、每個相機10組、共3個鏡頭)傳入，訓練可獲得計算Regularity Score的模型。
#### YOLOv4 訓練
將Unity螢幕畫面截圖(100幀/組 三個相機各1組)傳入，訓練可框出魚隻位置的模型。
#### 偵測程式(test.py)
將Unity中的畫面截圖傳入，使用訓練好的LSTM-Autoencoder模型計算出Regularity Score找出異常，將得到的異常與YOLOv4的魚隻位置做比較獲得問題魚隻，最後將異常魚隻位置傳回Unity以持續追蹤此魚。
## 執行影片連結
https://youtu.be/bZ39sGFVcm0
